<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Master Chef and Puppet Show</title>
    <script src="http://gnab.github.io/remark/downloads/remark-0.6.2.min.js" type="text/javascript"> </script>
    <script src="//use.edgefonts.net/sansita-one;carter-one;amaranth;lato.js"></script>
    <script src="//use.edgefonts.net/bangers.js"></script>
    <script src="//use.edgefonts.net/josefin-sans:n1,i1,n3,i3,n4,i4,n6,i6,n7,i7.js"></script>
    <style type="text/css" media="screen">
      @import url(http://fonts.googleapis.com/css?family=Lobster);
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif);
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(http://fonts.googleapis.com/css?family=Lato);
      @import url(http://fonts.googleapis.com/css?family=Ruluko);
      @import url(http://fonts.googleapis.com/css?family=Caudex);


      body {
        font-family: lato, sans-serif;
        font-size: 30px;
      }
       h1 {
        font-family: bangers, sans-serif;
        font-weight: 400;
        margin-bottom: 0;
      }
      h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin-bottom: 0;
      }
      h1 { font-size: 3.6em; }
      h2 { font-size: 2em; }
      h3 { font-size: 1.6em; }
      .footnote {
        font-family: 'Yanone Kaffeesatz';
        position: absolute;
        right: 1em;
        bottom: 1.5em;
      }
      li p { line-height: 1.25em; }
      .red { color: #fa0000; font-size: 0.8em;}
      .large { font-size: 2em; }
      a, a > code {
        color: rgb(249, 38, 114);
        text-decoration: none;
      }
      code {
        -moz-border-radius: 5px;
        -web-border-radius: 5px;
        background: #e7e8e2;
        border-radius: 5px;
        font-size: 20px;
      }
      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }
      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }

      /* Slide-specific styling */
      #slide-inverse .footnote {
        bottom: 12px;
        left: 20px;
      }
      #slide-how .slides {
        font-size: 0.9em;
        position: absolute;
        top:  151px;
        right: 140px;
      }
      #slide-how .slides h3 {
        margin-top: 0.2em;
      }
      #slide-how .slides .first, #slide-how .slides .second {
        padding: 1px 20px;
        height: 90px;
        width: 120px;
        -moz-box-shadow: 0 0 10px #777;
        -webkit-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
      }
      #slide-how .slides .first {
        background: #fff;
        position: absolute;
        top: 20%;
        left: 20%;
        z-index: 1;
      }
      #slide-how .slides .second {
        position: relative;
        background: #fff;
        z-index: 0;
      }

      /* Two-column layout */
      .left-column {
        font-family: bangers, sans-serif;
        color: #777;
        width: 20%;
        height: 92%;
        float: left;
      }

      /* Two-column layout */
      .left-column h2 {
        font-family: bangers, sans-serif;
        font-size: 1.3em;
      }
       /* Two-column layout */
      .left-column h3 {
        font-family: bangers, sans-serif;
        font-size: 0.8em;
      }
        /* Two-column layout */
      .left-column h4 {
        font-family: bangers, sans-serif;
        font-size: 0.6em;
      }
      .left-column h2:last-of-type, .left-column h3:last-child {
          color: #000;
        }
      .right-column {
        width: 76%;
        float: right;
      }

      .remark-slide-content {
        padding-top: 0.5em;
        padding-right: 0.5em;
        padding-bottom: 0.5em;
        padding-left: 0.9em;
      }
      .remark-slide-number {
        bottom: 0px;
        font-size: 0.6em;

      }
      .splash
      { padding: 1em 3em;
        background: url(img/devoxx_fr_2014_splash.png) no-repeat center #272822;
        color: #777872; text-align: right; vertical-align: bottom;
      }

    </style>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, splash

#Master Chef & Puppet Show

.footnote[ [@francoisledroff](https://twitter.com/francoisledroff) & [@rpelisse](https://twitter.com/rpelisse) at [Devoxx fr 2014](http://cfp.devoxx.fr/devoxxfr2014/talk/QRF-934/Chez%20les%20barbus:%20master%20chef%20et%20puppet%20show)]
---
class: center, middle, inverse
## [@rpelisse](https://twitter.com/rpelisse)

???

Alors, je suis Romain Pelisse, je suis "Cloud Architect" chez Red Hat, pour qui je travaille depuis
presque plus de deux ans. J'ai toujours travaillé dans l'Open Source, ce qui m'a, d'une part, amener
naturellement à travailler chez Red Hat, mais c'est aussi comme ça que j'ai rencontré François,
quand nous avons travailler ensemble chez Atos Origin, au sein du centre de compétence Open Source.

Bien que Puppet ne soit pas un produit Red Hat, on l'utilise beaucoup, car il se trouve très souvent
au croissement de nombreux de produit - comme Satellite ou RHEL, mais est aussi l'acteur principale
de l'intégration de ces derniers au sein de l'IT de nos clients.

---
class: center, middle, inverse
## [@francoisledroff](https://twitter.com/francoisledroff)

---
class: center, middle, inverse

# Quoi?
# Comment?
# et Pourquoi?

???

Francois:
Chef et puppet sont deux solutions concurrentes de gestion de configuration
Nous allons rapidement lever le voile sur la nature de ces solutions

Romain
Pourquoi? Quel est ce nouveau besoin ? Pourquoi cet engouement pour coder nos infrastructure ?

Francois
Avant de passer à l'exploration rapide de quelque cas concrets
mettant en oeuvre la configuration de back-end java

Romain
et enfin une section pour un usage plus avancé, mettant en exergue quelques unes de nos retour d'experience et 'best pratices'

# Quoi?
 * ## *infrastrucure as code*
 	* infrastructure
 	* infrastructure as code
 * ## Puppet 
   * @romain TODO : presenter les concepts clef de Puppet
   * tu veux peut-etre parler de Vagrant ?
 * ## Chef
  *  Panorama
   * le serveur
   * la machine de dev
   * les noeuds client
   * les policy
   * les livres de recettes
# Comment / Quelques études de cas
   * un simple jar 
   * Mise en place de JBoss Data Grid (JDG)
   * securiser mon serveur et proteger mes secrets
   * gestion des dépendances, reutilisation des commmunity cookbook
   * allez plus loin: pour les truc qu'on survole avec des pointeurs surtout pour donner envie a la fin:
   	* testKitchen et chefspec 
   	* foodcritic et strainer et guard
   	* bundler et jenkins 
   	* docker et packer ?
# Mais Pourquoi au fait ?

---
layout: false
.left-column[
  ## Quoi?
  ### - Infrastructure 
]


.right-column[

**Infrastructure** [in-fruh-struhk-cher]
nom féminin

.red[[1]] une collection de
* ressources:
 * réseaux, noeuds 
 * systèmes de fichiers, fichiers, répertoires, liens symboliques, montages disques
 * utilisateurs, groupes
 * packages, logiciels, services
 * configuration
 
* agissant de concert

* pour fournir un service


]
.footnote[.red[[1] [Introduction to Chef](http://www.slideshare.net/JulianDunn/chef-introduction-princeton-meetup)]]

???

notes à déplacer:

Donc forcemment toujours sujet au changement...
on commence par un app server, une db
on ajoute un load balancer devant les app serveurs
puis on veut aussi du HA sur la base, puis sur les LBs
on scale, on passe a 2 load balancers
puis on rajoute du cache distribué
puis on doit maintenir ca par env,
monter des data centers par geographie

---

layout: false
.left-column[
  ## Quoi?
  ### - Infrastructure 
  ### - Infrastructure as code
  ### - Abstractions
  ### - Puppet & Chef
  
  ![Puppet](img/puppet_logo.png)
  ![Chef](img/chef_logo.png)
  
]

.right-column[

Community Driven

Puppet:
- créé en 2005, édité par PuppetLabs
- license Apache
- langage dédié (DSL) 
- Et pourquoi Puppet ? Romain ?

Chef:
- créé en 2009, édité par Opscode/Chef
- license Apache
- écrit en Ruby
- langage dédié (DSL) et pure Ruby
- Et pourquoi Chef ? Francois ?



]



???

https://www.ibm.com/developerworks/library/a-devops2/

Chef has been around since 2009. It was influenced by Puppet and CFEngine. 
Chef supports multiple platforms including Ubuntu, Debian, RHEL/CentOS, Fedora, Mac OS X, Windows 7, and Windows Server. 
It is often described as easier to use — particularly for Ruby developers, 
because everything in Chef is defined as a Ruby script and follows a model that developers are used to working in. 
Chef has a passionate user base, and the Chef community is rapidly growing while developing cookbooks for others to use.

chef-solo: http://docs.opscode.com/chef_solo.html
chef-solo is an open source version of the chef-client that allows using cookbooks with nodes without requiring access to a server. chef-solo runs locally and requires that a cookbook (and any of its dependencies) be on the same physical disk as the node. chef-solo is a limited-functionality version of the chef-client and does not support the following:

Node data storage
Search indexes
Centralized distribution of cookbooks
A centralized API that interacts with and integrates infrastructure components
Authentication or authorization
Persistent attributes

chef-zero : http://www.slideshare.net/mpgoetz/chefzero-local-mode

https://speakerdeck.com/sethvargo/using-ruby-to-automate-your-life

Puppet evolved from CFEngine and showed potential to be a new kind of configuration management. The original design of Chef was strongly influenced by our own experiences working with and contributing to the Puppet project. That said, Chef does not share any code from Puppet, and is not a “fork” of the Puppet project.

Chef is different from Puppet in a number of important ways:

* Chef uses Ruby as the configuration language, as opposed to a custom DSL
* Chef is designed from the ground up to integrate with other tools, or to make that integration as simple as possible. Chef is not the canonical representation of your infrastructure. It is a service that exposes data about the state of your infrastructure
* The chef-client applies resources in the order they are specified in recipes. There is no dependency management. This means multiple chef-client runs will always apply the resources under management in the same order, every time
* Resources have actions, which can be signaled
* Resources can appear more than once and they inherit the attributes of the earlier resource. In other words, you can tell Apache to start and stop in a recipe by specifying the resource twice, with the second one only changing the action attribute

http://docs.opscode.com/chef_why.html


---
layout: false
.left-column[
  ## Quoi?
  ### - Infrastructure 
  ### - Infrastructure as code  
]

.right-column[

Chef & Puppet sont 2 solutions concurrentes 
* d' * **Infrastructure as Code** *

Ne remplacent pas juste tes scripts shell, te permettent:

* d'abstraire la façon dont tu manages ton infra
* de la coder 
 * de la (re)construire à partir de serveurs 'nus'
* faire converger tes systèmes 
* de façon idempotente 
```   
    Etat A --> Etat B  (ex: install)
    Etat B --> Etat B  (ex: contrôle)
    Etat C --> Etat B  (ex: remise en état)
```
]

???


http://www.slideshare.net/jedi4ever/infrastructure-as-code-abug-session
http://architects.dzone.com/articles/infrastructure-code
https://www.youtube.com/watch?v=cuJZbRngWC0


How is this better than bash script ?
reliable, reproducible, idempotent, cross-platform, clean, ruby, it's not bash


---
layout: false
.left-column[
  ## Quoi?
   ### - Infrastructure 
   ### - Infrastructure as code
   ### - Abstractions
  
]

.right-column[

Complexe ? Non ! Abstrait.

 * ressources

 * rôles

 * environnements

Chef & Puppet te permettent de **persister et manager** ces abstractions sous forme de code.




]

???

Romain:
Alors comme évoqué un peu avant, une infrastructure est quelque chose d'assez complexe. En plus des
configurations et des installations, il y a des problématiques réseaux, tel que les firewall, et
résolution de nom de FQDN - et j'en passe. Heureusement, pour simplifier ce fouilli, Puppet et
Chef abstrait tout ces composants sous forme de "ressource".

C'est abstraction est essentiel, car elle libère la description de l'état d'un système ("un
webserveur pour tels vhosts") de l'implémentation physique sous jacente ("Apache 2.22 sur RHEL").
Ainsi, on peut simplement dire à Puppet, "je voudrais que ce système exécute Apache avec ce fichier
configuration". Ce dernier va simplement utiliser "yum" si le système est sous RHEL ou "apt-get"
sous Debian pour installer le logiciel.


En fait, cette abstraction devrait vous paraitre assez naturelle, car c'est finalement assez proche
de la notion d'interface en Java.

François:
TODO

Romain:
Bref, Puppet & Chef vous permettent donc de décrire l'état souhaité de votre infrastructure et de
non seulement persiter ce dernier, ainsi que ses révisions, mais aussi de "manager" votre
infrastructure, en ajoutant des modifications à cette historique.


---

layout: false
.left-column[
  ## Quoi?
   ### - Infrastructure
   ### - Abstractions
   ### - Puppet & Chef
   ### - Clients - Serveur


]

.right-column[

Noeud: une machine configurée pour être maintenue par un agent, un client Chef/Puppet
* un object *Node*
 * attributs détectés et communiqués à l'agent
 * attributs configurés par les recettes
 * *run-list*: une liste des recettes executées

Client Chef/Puppet: un agent qui tourne sur chacun des noeuds inscrits
 * met le noeud dans l'état attendu

]

???

* Noeud/*Node*: une machine configurée pour être maintenue par un agent, un client Chef/Puppet
 * machine: vm, physique, privée, ou sur le cloud
 * A chaque noeud correspond un object *Node* sur le serveur Chef/Puppet
 	* attributs
 		* détectés et communiqués à l'agent ( Ohai pour Chef):  Platform, cpu, kernel, host names, fqdn et bien plus
 		* configurés par les recettes
 	* *run-list*: une liste ordonnées de roles et/ou de recettes executées dans un ordre défini

* un client Chef/Puppet: un agent qui tourne sur chacun des noeuds inscrits auprès du serveur Chef/Puppet
 * met le noeud dans l'état attendu


---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar


]

.right-column[

## un simple jar

un micro service/site web, autosuffisant

oui mais il faut:
* installer le jdk,
* décompresser le jar,
* l'insaller en tant que service,
* faire tourner les log,
* et les monitorer.


]


???

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar


]

.right-column[

```
#unpack CQ5 quickstart jar
execute 'java' do
  command node['cq5']['unpack']
  cwd node['cq5']['install_dir']
  action :run
  user node['cq5']['user']
  group node['cq5']['group']
  not_if do
	File.exists?(node['cq5']['stdout_log'])
  end
  notifies :restart, 'service[cq5]', :delayed
end

```

```
service 'cq5' do
  action [:enable]
  supports [:status, :start, :stop, :restart]
end
```

```
include_recipe 'it-splunkforwarder::default'
```



]


???

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware


]

.right-column[

* Mise en place de JBoss Data Grid (JDG)
 * JDG en quelques mots....

ok et donc:
* installer le jdk
* installer et configuer le jdg (v6) de manière completement **automatisée**
* assurer une mise à jour des **binaires** ("patching") du produit
* disposer de plusieurs instances par machine, pour créer une "grille" avec un seul noeud
* mettre en place le monitoring

]


???


presenter's notes:

Alors de manière similaire au cas décrit par François, moi aussi, dans mon travail de tout les jours je dois assurer l'installation de "bouzin" en Java - et, étrangement, surtout ceux que Red Hat supporte (bizarrement, j'installe rarement du Spring...). Un de nos produits récent - et honnêtement, est JBoss Data Grid. Conçu pour remplacé JBoss Cache, ce produit permet de mettre en place une "grille de données". C'est donc, pour simplifier, une source de données de type NoSQL, qui distribue le stockage des données qu'on lui confie, sur plusieurs noeuds.

Ainsi, Data Grid peut aisément monter à l'échelle, car, si on a besoin de plus d'espace, on rajoute simplement des noeuds. Par la magie d'un algorithme de hashage, quelques soit le nombre de noeuds formant la grille, le programme client sera toujours en mesure de déterminer quel noeud possède son information. Bref, c'est génial, c'est "cloud", c'est "scalable", etc...

(dans la prochaine version, ça fera aussi le café et s'attaquera à la faim dans le monde)

Plus sérieusement, c'est bien gentil de monter en charge, mais si il me faut un admin et deux heures pour agrandir (ou réduire) la taille de ma grille, c'est quand même pas très, très pratique, il faut le reconnaitre. Pour tirer parti de cet aspect du produit, il est donc nécessaire de pouvoir automatiser, autant que possible, son installation et sa configuration.

En plus de permettre l'automatisation, il faut aussi pouvoir déployer aisément un correctif (un changement de binaire). JDG n'est pas, comme le backend de François, un simple jars. En effet, il s'execute sur un serveur JBoss AS et est donc fait de nombreux jars, mais aussi de fichier de configuration diverses. Une mise à jour, de securité ou non, peut affecter plusieurs de ces fichiers.

Enfin, comme pour François, il ne faut pas oublier notre ami la JVM. Avant même d'installer JDG, il faut bien s'assurer que cet outil d'infrastructure soit en place.

Alors, à la différence notable de son cas, nous chez Red Hat, on a peu cette habitude d'utiliser des RPMs ! D'ailleurs, c'est bien parce que Puppet, il est pas bête (oh la rime), et, par défaut, quand il faut installer quelque chose sur une RHEL ou une autre distribution à base de RPM, il utilise par défaut, RPM et yum. Alors, chouette, déjà c'est réglé, on package JDG sous forme de RPM - bidon, et on demande à Puppet de simpement l'installer.

Bon il faut

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware


]

.right-column[

```
node *-jdg.mygrid.com {

  $openjdk = 'openjdk-1.6.0'
  package { $openjdk:
    ensure => installed,
  }

  $jdg = 'jdg'
  package { $jdg:
    ensure => installed,
    require => Package[$openjdk]
  }

  service { $jdg:
    ensure => running,
    require => Package[$jdg],
  }
}
```

]


???

TODO: décrire le contenu du script à l'oral

Et voilà, le tour est joué, on vient déjà d'implémenter les deux premiers points de notre cahier des charges. On automatisé l'installation de JDG, et on s'est surtout assurer que notre logiciel dispose de la bonne "infrastructure" (ie la bonne jvm). En outre, permet d'assurer, lors de son exécution que non seulement le produit est installé, mais aussi que le service tourne ! Bon, avant d'attaquer la suite, je laisse François reprendre son cas d'étude à lui...

TODO: la "suite", pour la partie "conf du service"
- installation multi instance avec un seul "rpm binaire"
- mise en place du firewall/selinux
- configurer les instances pour n'utiliser qu'un fichier de configuration
- servir le fichier de conf depuis puppet
- mise en place du monit avec Jolokia

puis, pour la partie "prod"
- ajout d'une instance par noeud -> mise à jour fw
- ajout d'un cache dans la grille


---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements


]

.right-column[

slide 41 et 43

]


???

Policy settings map business and operational requirements,
such as process and workflow, to settings stored on the Chef server:

Ces Policy vont definir quelles run-list vont être appliquées aux noeuds

* Roles
 * représente votre type de serveur (lb, JEE serveur, DB Serveur...)

* Data Bags
 * a global variable stored as JSON data in the Chef server.
 * A data bag is indexed for searching and can be loaded by a recipe or accessed during a search.

* Environments
 * modèle votre cycle de release et vos process (dev, test, stage, prod)


* Nodes
 * vos serveurs (physique ou virtuel, sur votre réseau our sur le cloud)
 * sur lequel tourne `chef-client`


---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements


]

.right-column[

chef-repo/environments/trunk-stable.rb

```
name "trunk-stable"
description "Environment for trunk-stable nodes"
cookbook_versions({"adobehub"=>"= 0.0.16","cq5" =>"= 0.0.13"})
override_attributes({
  "apache" => {"servername" => "hub-trunk-stable.corp.adobe.com" },
  "cq5" => {"vault_accounts_cq_admin_item" => "hub_trunk_cq_admin" ,
           "ldap" => {"vault_conf"=> "ldap_it_ad_test_conf" ,
                      "host"=> "stagechild.adstage.adobe.com",
                      "secure"=> "false",
                      "port"=> "389"} ,
            "disabled_osgi_bundles" => ['org.apache.sling.jcr.webdav', 'org.apache.sling.jcr.davex'],
            "debug" => "true",
            "debug_port" => "30305"}
})
```

```
default['adobehub']['trusted_certificates'] = [
  'api.corp.adobe.com',
  'lces2-dev2.corp.adobe.com',
  's2api.corp.adobe.com',
  'sap-rs4ci.corp.adobe.com']
```

]


???

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements


]

.right-column[

chef-repo/environments/trunk-stable.rb

```
name "hub_server"
description "Adobe Hub Server Role"
run_list "recipe[chef-client::delete_validation]", "recipe[chef-client]", "recipe[ntp]", "recipe[adobehub]"
```

]

???


---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements
   ### - unique, central


]

.right-column[

TODO code puppet


]

???

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements
   ### - unique, central
   ### - sécurisé


]

.right-column[

slide 56

]

???

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements
   ### - unique, central
   ### - sécurisé


]

.right-column[

```
include_recipe 'chef-vault-util::default'
keystore_item = chef_vault_item(node['adobehub']['vault_password'], node['adobehub']['vault_password_keystore_item'])
jvm_keystore_password = keystore_item[node['adobehub']['vault_password_property']]

execute "create the server keystore p12 key file to perform 2 way ssl call as client" do
  command "openssl pkcs12  -export  -in #{node['apache']['ssl_cert_file_path']}  -inkey #{node['apache']['ssl_key_file_path']}  -out #{node['adobehub']['ssl_p12_file_path']}  -passout pass:#{jvm_keystore_password}"
  not_if { File.exists?(node['adobehub']['ssl_p12_file_path']) }
end
```


]

???

---

layout: false
.left-column[
  ## Comment ?
   ### - un simple jar
   ### - un middleware
   ### - environnements
   ### - unique, central
   ### - sécurisé
   ### - élastique


]

.right-column[

TODO : romain

]

???



---
class: center, middle, inverse
# Pourquoi?

---

layout: false
.left-column[
  ## Pourquoi?
]

.right-column[

Chef & Puppet: une porte d'entrée

* pour passer de de 10 à 100 serveurs

* pour gérer un parc hétérogène

* vers le cloud,

* un acteur continuous delivery


]
.footnote[![Redhat](img/redhat_logo.jpeg)]

???

http://www.slideshare.net/opscode/week-1-overview-of-chef
Should we add a tale of growth section dans le 'pourquoi?'



---
layout: false
.left-column[
  ## Pourquoi?
  ### - Transformation d'Adobe IT
]

.right-column[

- Adobe **Creative Cloud**
 * *'Accelerate, Simplify, Scale'*

- décloisonner les équipes, dev, de qualité, de sécurité et d'exploitation

- Comme notre infra devient code, elle devient
 * testable
 * versionable
 * jetable
 * repétable

- [@bdelacretaz](http://www.slideshare.net/bdelacretaz/open-development-in-the-enterprise-apachecon-na-2013)
 * **If it's not in the source code control system, it doesn't exist.**


]
.footnote[![Adobe](img/adobe_logo.png)]

???


- Adobe IT
 * *Accelerate, Simplify, Scale*

- décloisonner les équipes, dev, de qualité et d'exploitation
 * faciliter, accélérer les changements
 * mieux garantir stabilité et sécurité
 * éviter les surprises

- Comme votre infra devient code, elle devient
 * testable
 * versionable
 * jetable
 * repétable / reproductible  *'cloud-ready'*

- [@bdelacretaz](http://www.slideshare.net/bdelacretaz/open-development-in-the-enterprise-apachecon-na-2013):
 * **If it's not in the source code control system, it doesn't exist.**


* http://sdarchitect.wordpress.com/2012/12/13/infrastructure-as-code/
* http://java.dzone.com/articles/infrastructure-code-key-devops
* http://architects.dzone.com/articles/infrastructure-code


---

layout: false
.left-column[
  ## Pourquoi?
  ### - Transformation d'Adobe IT
  ### - Open Development

]
.right-column[

[@bdelacretaz](http://www.slideshare.net/bdelacretaz/open-development-in-the-enterprise-apachecon-na-2013) nous donnes 5 clefs:

 * Whatever you're working on, it must be backed by an issue in the tracker.

 * **If it's not in the source code control system, it doesn't exist.**

 * If it's important, it needs a permanent URL.

* If it didn't happen on the dev list, it didn't happen.

* What happened while you were away? Check the activity stream and archives.
]


???

Who needs secrets?
Who cares if your code is not yet perfect?

* http://www.slideshare.net/bdelacretaz/open-development-in-the-enterprise-apachecon-na-2013

without trust, the tools don't matter

* http://www.slideshare.net/JulianDunn/chef-introduction-princeton-meetup

---
class: center, middle, inverse
# fin
#### ou pas


---

layout: false
.left-column[
  ## Chef Comment ?
  ### -  Panorama


]

.right-column[

![overview](img/overview_chef.png)

]
.footnote[![Chef](img/chef_logo.png)]

???

http://docs.opscode.com/chef_overview.html

---
layout: false
.left-column[
  ## Chef Comment ?
  ### -  Panorama
  ### -  Server
]

.right-column[

* recherche
* management
* API

]

.footnote[![Chef](img/chef_logo.png)]

---
layout: false
.left-column[
  ## Chef Comment ?
  ### -  Panorama
  ### -  Server
  ### -  Nodes
  ### -  Policy
  ### -  cookbooks (attributs, recipes version)
]

.right-column[

* Nodes
 * vos serveurs (physique ou virtuel, sur votre réseau our sur le cloud)
 * sur lequel tourne `chef-client`

* attributes

* run-list
]

.footnote[![Chef](img/chef_logo.png)]


---
layout: false
.left-column[
  ## Chef Comment ?
  ### -  Panorama
  ### -  Server
  ### -  Nodes
  ### -  Policy
]

.right-column[

Policy settings map business and operational requirements, to settings stored on the server

* Environments
 * modèle votre cycle de release et vos process (dev, test, stage, prod)

* Roles
 * représente votre type de serveur (lb, JEE serveur, DB Serveur...)

* Data Bags
 * variable globales, stockées en json sur le serveur Chef (chargées/recherchés dans les recettes)

]

.footnote[![Chef](img/chef_logo.png)]

???

manager le complexité, et embrasser les abstraction offertes par Chef

* Organisations
 * locataires independants du chef serveur (BU, Département)


Organization :

Completely independent tenants of Enterprise Chef
*  Share nothing with other organizations
*  May represent different
*  Companies
*  Business Units
*  Departments

Environments may include data attributes necessary
for configuring your infrastructure
*  The URL of your payment service’s API
*  The location of your package repository
*  The version of the Chef configuration files that
should be used


Roles may include a list of Chef configuration files
that should be applied.
*  We call this list a Run List
*  Roles may include data attributes necessary for
configuring your infrastructure
*  The port that the application server listens on
*  A list of applications that should be deployed

Nodes Adhere to Policy
• An application, the chef-client, runs on each node
• chef-client will
• gather current system configuration
• download the desired system configuration from
the Chef server
• configure the node such that it adheres to the
policy

http://www.slideshare.net/opscode/week-1-overview-of-chef

http://docs.opscode.com/chef_overview.html


---
layout: false
.left-column[
  ## Chef Comment ?
  ### -  Panorama
  ### -  Server
  ### -  Nodes
  ### -  Policy
  ### -  cookbooks
]

.right-column[

* attributes
* recipes
* version

]

.footnote[![Chef](img/chef_logo.png)]



---

# slides below are just remark.js demo

---
class: center, middle, inverse

#remark
[ri-mahrk]
.footnote[Go to directly to [project site](https://github.com/gnab/remark)]
---
## What is it and why should I be using it?
---
layout: false
.left-column[
  ## What is it?
]
.right-column[
  A simple, in-browser, Markdown-driven slideshow tool targeted at people who know their way around HTML and CSS, featuring:

- Markdown formatting, with smart extensions

- Presenter mode, with cloned slideshow view

- Syntax highlighting, supporting a range of languages

- Slide scaling, thus similar appearance on all devices / resolutions .red[*]

- Touch support for smart phones and pads, i.e. swipe to navigate slides

.footnote[.red[*] At least browsers try their best]
]
---
.left-column[
  ## What is it?
  ## Why use it?
]
.right-column[
If your ideal slideshow creation workflow contains any of the following steps:

- Just write what's on your mind

- Do some basic styling

- Easily collaborate with others

- Share with and show to everyone

Then remark might be perfect for your next.red[*] slideshow!

.footnote[.red[*] You probably want to convert existing slideshows as well]
]
---
.left-column[
  ## What is it?
  ## Why use it?
]
.right-column[
As the slideshow is expressed using Markdown, you may:

- Focus on the content, expressing yourself in next to plain text not worrying what flashy graphics and disturbing effects to put where

As the slideshow is actually an HTML document, you may:

- Display it in any decent browser

- Style it using regular CSS, just like any other HTML content

- Use it offline!

As the slideshow is contained in a plain file, you may:

- Store it wherever you like; on your computer, hosted from your Dropbox, hosted on Github Pages alongside the stuff you're presenting...

- Easily collaborate with others, keeping track of changes using your favourite SCM tool, like Git or Mercurial
]
---
template: inverse

## How does it work, then?
---
name: how

.left-column[
  ## How does it work?
### - Markdown
]
.right-column[
A Markdown-formatted chunk of text is transformed into individual slides by JavaScript running in the browser:

```remark
# Slide 1
This is slide 1

---

# Slide 2
This is slide 2
```

.slides[
  .first[
  ### Slide 1
  This is slide 1
  ]
  .second[
  ### Slide 2
  This is slide 2
  ]
]

Regular Markdown rules apply with only a single exception:

  - A line containing three dashes constitutes a new slide
  (not a horizontal rule, `&lt;hr /&gt;`)

Have a look at the [Markdown website](http://daringfireball.net/projects/markdown/) if you're not familiar with Markdown formatting.
]
---
.left-column[
  ## How does it work?
  ### - Markdown
  ### - Inside HTML
]
.right-column[
A simple HTML document is needed for hosting the styles, Markdown and the generated slides themselves:

```xml
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      /* Slideshow styles */
    </style>
  </head>
  <body>
    <textarea id="source">
      <!-- Slideshow Markdown -->
    &lt;/textarea&gt;
    <script type="text/javascript" src="remark.js">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
```

You may download remark to have your slideshow not depend on any online resources, or reference the [latest version](https://github.com/gnab/remark/releases) online directly.
]
---
template: inverse

## Of course, Markdown can only go so far.
---
.left-column[
  ## Markdown extensions
]
.right-column[
To help out with slide layout and formatting, a few Markdown extensions have been included:

- Slide properties, for naming, styling and templating slides

- Content classes, for styling specific content

- Syntax highlighting, supporting a range of languages
]

---
.left-column[
  ## Markdown extensions
  ### - Slide properties
]
.right-column[
Initial lines containing key-value pairs are extracted as slide properties:

```remark
name: agenda
class: middle, center

# Agenda

The name of this slide is {{ name }}.
```

Slide properties serve multiple purposes:

* Naming and styling slides using properties `name` and `class`

* Using slides as templates using properties `template` and `layout`

* Expansion of `{{ property }}` expressions to property values

See the [complete list](https://github.com/gnab/remark/wiki/Slide-Properties) of slide properties.
]
---
.left-column[
  ## Markdown extensions
  ### - Slide properties
  ### - Content classes
]
.right-column[
Any occurences of one or more dotted CSS class names followed by square brackets are replaced with the contents of the brackets with the specified classes applied:

```remark
.footnote[.red.bold[*] Important footnote]
```

Resulting HTML extract:

```xml
<span class="footnote">
  <span class="red bold">*</span> Important footnote
</span>
```
]
---
.left-column[
  ## Markdown extensions
  ### - Slide properties
  ### - Content classes
  ### - Syntax Highlighting
]
.right-column[
Code blocks can be syntax highlighted by specifying a language from the set of [supported languages](https://github.com/gnab/remark/wiki/Configuration-Options#wiki-highlighting).

Using [GFM](http://github.github.com/github-flavored-markdown/) fenced code blocks you can easily specify highlighting language:

.pull-left[

<pre><code>```javascript
function add(a, b)
  return a + b
end
```</code></pre>
]
.pull-right[

<pre><code>```ruby
def add(a, b)
  a + b
end
```</code></pre>
]

A number of highlighting [styles](https://github.com/gnab/remark/wiki/Configuration-Options#wiki-highlighting) are available, including several well-known themes from different editors and IDEs.

]
---
.left-column[
  ## Presenter mode
]
.right-column[
To help out with giving presentations, a presenter mode comprising the
following features is provided:

- Display of slide notes for the current slide, to help you remember
  key points

- Display of upcoming slide, to let you know what's coming

- Cloning of slideshow for viewing on extended display
]
---
.left-column[
  ## Presenter mode
  ### - Inline notes
]
.right-column[
Just like three dashes separate slides,
three question marks separate slide content from slide notes:

```
Slide 1 content

???

Slide 1 notes

---

Slide 2 content

???

Slide 2 notes
```

Slide notes are also treated as Markdown, and will be converted in the
same manner slide content is.

Pressing __P__ will toggle presenter mode.
]
???
Congratulations, you just toggled presenter mode!

Now press __P__ to toggle it back off.
---
.left-column[
  ## Presenter mode
  ### - Inline notes
  ### - Cloned view
]
.right-column[
Presenter mode of course makes no sense to the audience.

Creating a cloned view of your slideshow lets you:

- Move the cloned view to the extended display visible to the audience

- Put the original slideshow in presenter mode

- Navigate as usual, and the cloned view will automatically keep up with the original

Pressing __C__ will open a cloned view of the current slideshow in a new
browser window.
]
---
template: inverse

## It's time to get started!
---
.left-column[
  ## Getting started
]
.right-column[
Getting up and running is done in only a few steps:

1. Visit the [project site](http://github.com/gnab/remark)

2. Follow the steps in the Getting Started section

For more information on using remark, please check out the [wiki](https://github.com/gnab/remark/wiki) pages.
]
---
name: last-page
template: inverse

## That's all folks (for now)!

Slideshow created using [remark](http://github.com/gnab/remark).
    </textarea>
    <script>
      var slideshow = remark.create({ highlightLanguage: 'javascript'});
    </script>
  </body>
</html>
